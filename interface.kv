WindowManager:
    HomeScreen:
    PlatformScreen:
    FileSelection:
    FileConversion:
    FileDownload:
    Error:

<HomeScreen>:
    name: "home"

    GridLayout:
        cols:1

        Button:
            id: compressimage
            text: "Compress Images"
            on_press:
                app.on_press_homescreen_button(self)
                app.root.current = "platform"
                root.manager.transition.direction = "left"

        Button:
            id: compressvideo
            text: "Compress Video"
            on_press:
                app.on_press_homescreen_button(self)
                app.root.current = "platform"
                root.manager.transition.direction = "left"

        Button:
            id: compressaudio
            text: "Compress Audio"
            on_press:
                app.on_press_homescreen_button(self)
                app.root.current = "platform"
                root.manager.transition.direction = "left"

<PlatformScreen>:
    name: "platform"

    GridLayout:
        cols:1

        GridLayout:
            cols:2

            Button:
                id: facebook
                text: "Facebook"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"                

            Button:
                id: instagram
                text: "Instagram"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"

        GridLayout:
            cols:2

            Button:
                id: twitter
                text: "Twitter"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"

            Button:
                id: linkedin
                text: "LinkedIn"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"

        GridLayout:
            cols:2

            Button:
                id: discord
                text: "Discord"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"

            Button:
                id: messenger
                text: "Messenger"
                on_press:
                    app.on_press_platform_button(self)
                    app.root.current = "file"
                    root.manager.transition.direction = "left"

<FileSelection>:
    name: "file"

    FileChooserListView:
        id: filechooser
        on_submit: 
            root.manager.result = app.selected(filechooser.selection)
            root.manager.compressed_picture = app.getCompressedFile()
            root.manager.original_file = app.getOriginalFile()
            root.manager.errorMessage = app.getErrorMessage()
            app.root.current = "download" if root.manager.result == "Success" else "error"
            root.manager.transition.direction = "left"

<FileConversion>:
    name: "conversion"

    Label:
        text: 'Hello World'

<FileDownload>:
    name: "download"

    GridLayout:
        cols: 2

        GridLayout:
            cols: 1
            Image:    
                source: root.manager.original_file
                allow_stretch: True
            Label:
                text: "Original file"
    
        GridLayout:
            cols: 1
            Image:    
                source: root.manager.compressed_picture
                allow_stretch: True
            Label:
                text: "Compressed file"

    GridLayout:
        cols: 1
        Button:
            id: downloadbutton
            text: "Download Image"
            on_press:
                app.share(root.manager.compressed_picture)
                
<Error>:
    name: "error"

    BoxLayout:

        Label:
            text: root.manager.errorMessage

        Button:
            text: "Go Back"
            on_press:
                app.root.current = "home"
                root.manager.transition.direction = "right"


    