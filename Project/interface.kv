WindowManager:
    HomeScreen:
    PlatformScreen:
    FileSelection:
    FileDownloadPicture:
    FileDownloadVideo:
    Error:

<HomeScreen>:
    name: "home"

    GridLayout:
        cols:1

        Button:
            id: compressimage
            text: "Compress Images"
            on_press:
                app.on_press_homescreen_button(self)
                app.root.current = "platform"
                root.manager.transition.direction = "left"

        Button:
            id: compressvideo
            text: "Compress Video"
            on_press:
                app.on_press_homescreen_button(self)
                app.root.current = "platform"
                root.manager.transition.direction = "left"

<PlatformScreen>:
    name: "platform"
    
    BoxLayout:
        orientation: 'vertical'

        GridLayout:
            cols:1
    
            Label:
                text: "Please select the platform"
    
            GridLayout:
                cols:2
    
                Button:
                    id: facebook
                    text: "Facebook"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left" 
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/facebook.png'
                            size_hint_x: 1
                                         
    
                Button:
                    id: instagram
                    text: "Ig"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left"
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/instagram.png'
                            size_hint_x: 1
    
            GridLayout:
                cols:2
    
                Button:
                    id: twitter
                    text: "Twitter"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left"
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/twitter.png'
                            size_hint_x: 1
    
                Button:
                    id: linkedin
                    text: "LinkedIn"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left"
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/linkedin.png'
                            size_hint_x: 1
    
            GridLayout:
                cols:2
    
                Button:
                    id: discord
                    text: "Discord"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left"
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/discord.png'
                            size_hint_x: 1
                    
    
                Button:
                    id: messenger
                    text: "Messenger"
                    on_press:
                        app.on_press_platform_button(self)
                        app.root.current = "file"
                        root.manager.transition.direction = "left"
                    StackLayout:
                        pos: self.parent.pos
                        size: self.parent.size
                        orientation: 'lr-tb'
                        Image:
                            source: 'icons/messenger.png'
                            size_hint_x: 1
                            
        Button:
            text: "Go Back"
            size: 75, 50
            size_hint_y: None
            font_size: 12
            on_press:
                app.root.current = "home"
                root.manager.transition.direction = "right"

<FileSelection>:
    name: "file"

    BoxLayout:
        orientation: 'vertical'
        FileChooserListView:
            id: filechooser
            on_submit:
                result = app.selected(filechooser.selection)
                mediatype = app.getmediatype()
                if mediatype == "Compress Video": \
                app.root.current = "downloadvideo" if result == "Success" else "error"
                else: \
                app.root.current = "download" if result == "Success" else "error"
                root.manager.transition.direction = "left"
                
        Button:
            text: "Go Back"
            size: 75, 50
            size_hint_y: None
            font_size: 12
            on_press:
                app.root.current = "platform"
                root.manager.transition.direction = "right"


<FileDownloadPicture>:
    name: "download"
    
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            cols: 2

            GridLayout:
                cols: 1
                Image:    
                    source: root.manager.original_file
                    allow_stretch: True
                Label:
                    text: "Original file"
        
            GridLayout:
                cols: 1
                Image:    
                    source: root.manager.compressed_media
                    allow_stretch: True
                Label:
                    text: "Compressed file"

        Label:
            id: download_folder
            font_size: 20
            markup: True
            height: 30
            size_hint_y: None
            text: 'Compressed picture successfully downloaded. [ref=some][b][u][color=0000ff]Open folder.[/color][/u][/b][/ref]'
            on_ref_press:
                app.open_folder()

        GridLayout:
            cols: 2
            size_hint_y: None

            Button:
                text: "Return to Homepage"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.root.current = "home"
                    root.manager.transition.direction = "right"

            Button:
                text: "Close Application"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.stop()

<FileDownloadVideo>:
    name: "downloadvideo"
    
    BoxLayout:
        orientation: 'vertical'
        
        Label:
            font_size: 20
            text_size:self.size
            halign:'center'
            valign:'middle'
            markup: True
            height: 30
            text: 'Original video could not be displayed. [ref=some][b][u][color=0000ff]Open original video.[/color][/u][/b][/ref]'
            on_ref_press:
                app.open_original_video()
    
        Label:
            font_size: 20
            markup: True
            height: 30
            text_size:self.size
            halign:'center'
            valign:'middle'
            text: 'Compressed video could not be displayed. [ref=some][b][u][color=0000ff]Open compressed video.[/color][/u][/b][/ref]'
            on_ref_press:
                app.open_compressed_video()

        Label:
            font_size: 20
            markup: True
            height: 30
            size_hint_y: None
            text: 'Compressed video successfully downloaded. [ref=some][b][u][color=0000ff]Open folder.[/color][/u][/b][/ref]'
            on_ref_press:
                app.open_folder()

        GridLayout:
            cols: 2
            size_hint_y: None

            Button:
                text: "Return to Homepage"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.root.current = "home"
                    root.manager.transition.direction = "right"

            Button:
                text: "Close Application"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.stop()
                     
<Error>:
    name: "error"

    GridLayout:
        cols: 1

        Label:
            id: errorMessage
            text: "Error"

        GridLayout:
            cols: 2
            size_hint_y: None
            Button:
                text: "Return to Homepage"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.root.current = "home"
                    root.manager.transition.direction = "right"

            Button:
                text: "Close Application"
                size: 75, 50
                size_hint_y: None
                font_size: 12
                on_press:
                    app.stop()